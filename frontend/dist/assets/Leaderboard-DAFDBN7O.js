import{H as I,B as N,d as O,r as n,c as g,a as e,F as b,f as U,k as V,l as p,g as z,j as w,o as f,t as S,e as y,p as A,h as F,_ as D}from"./index-CCdiR9uF.js";import{S as E}from"./SearchBox-C6zcmu8j.js";import{_ as H}from"./UserCardList.vue_vue_type_script_setup_true_lang-Bo5IXXxv.js";import{_ as J}from"./SquadCardList.vue_vue_type_script_setup_true_lang-DyE2txs7.js";import"./coin-C5JkormZ.js";import"./SkeletonLoader-SVX6hzMk.js";class M extends I{constructor(){super(N+"/league")}async getList(){const c=localStorage.getItem("leagues");if(c)try{return JSON.parse(c)}catch{}const a=await this.get("/list");if(a.isOk()){const t=a.value.result;return localStorage.setItem("leagues",JSON.stringify(t)),t}throw a.error}async getSquads(c,a="",t=50,l=1){const o=await this.get(`/squads/${c}/?query=${a}&size=${t}&page=${l}`);if(o.isOk())return o.value.result;throw o.error}async getMembers(c,a="",t=50,l=1){const o=await this.get(`/members/${c}/?query=${a}&size=${t}&page=${l}`);if(o.isOk())return o.value.result;throw o.error}}const m=u=>(A("data-v-883f739c"),u=u(),F(),u),T=m(()=>e("div",{class:"mx-auto page_information flex-center flex-column text-center"},[e("h1",{class:"text-color fs-large fw-bold"},"Leagues"),e("p",{class:"description-color fs-small fw-bold mt-3"}," List of available leagues with users and competing teams ")],-1)),j={class:"section_leagues mt-4"},Q={class:"box-shadow bg-card p-3 rounded-1"},R=m(()=>e("span",{class:"text-color fs-medium fw-bold"},"Leagues",-1)),G={class:"d-flex flex-column mt-3"},K=["onClick"],P={class:"league_image flex-center mr-2 bg-card box-shadow p-2 rounded-1"},W=["src"],X={class:"d-flex flex-column"},Y={class:"text-color fs-small fw-bold"},Z={class:"mt-2 description-color fs-small fw-normal"},ee={class:"theme-color"},se={class:"mt-3"},te={class:"box-shadow bg-card p-3 rounded-1"},ae={class:"flex-center mb-3"},le=m(()=>e("span",{class:"text-color fs-small fw-bold"},"Users",-1)),oe=[le],ce=m(()=>e("span",{class:"text-color fs-small fw-bold"},"Squads",-1)),re=[ce],ne=O({__name:"Leaderboard",setup(u){const c=new M,a=n(""),t=n(!0),l=n(),o=n(null),_=n(null),i=n(null),k=s=>!!(l.value&&l.value.id==s),L=s=>{i.value&&(l.value=i.value.find(r=>r.id==s),t.value?v():h())},q=()=>{c.getList().then(s=>{i.value=s,s&&s.length>0&&(l.value=s[0],x(l.value.id))})},x=s=>{c.getMembers(s,a.value).then(r=>{_.value=r})},$=s=>{c.getSquads(s,a.value).then(r=>{o.value=r})},v=()=>{t.value=!0,l.value&&x(l.value.id)},h=()=>{t.value=!1,l.value&&$(l.value.id)},C=s=>{a.value=s;const r=a.value;if(s.length==0){o.value=new Array,_.value=new Array;return}s.length<3||(o.value=null,_.value=null,setTimeout(()=>{a.value==r&&(t.value?v():h())},3e3))};return q(),(s,r)=>(f(),g(b,null,[T,e("div",j,[e("div",Q,[R,e("div",G,[i.value?(f(!0),g(b,{key:0},U(i.value,(d,B)=>(f(),g("div",{key:B,class:p(["d-flex align-items-center mb-3",k(d.id)?"selected":""]),onClick:ue=>L(d.id)},[e("div",P,[e("img",{class:"w-full h-full",src:s.$filters.serverLinkFormat(d.image),alt:""},null,8,W)]),e("div",X,[e("span",Y,S(d.name)+" League",1),e("span",Z,[y(" from "),e("b",ee,S(d.availableCoin),1),y(" balance coin ")])])],10,K))),128)):V("",!0)])])]),e("section",se,[e("div",te,[e("div",ae,[e("div",{class:p(["flex-center bg-card px-2 py-3 mr-1 select_fetch_user box-shadow rounded-1",t.value?"selected":""]),onClick:v},oe,2),e("div",{class:p(["flex-center bg-card px-2 py-3 ml-1 select_fetch_squads box-shadow rounded-1",t.value?"":"selected"]),onClick:h},re,2)]),z(E,{onChange:C,title:t.value?"Users":"Squads"},null,8,["title"]),t.value?(f(),w(H,{key:0,class:"mt-3",users:_.value},null,8,["users"])):(f(),w(J,{key:1,class:"mt-3",squads:o.value},null,8,["squads"]))])])],64))}}),he=D(ne,[["__scopeId","data-v-883f739c"]]);export{he as default};
